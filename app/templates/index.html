<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TerrorReco</title>
	<link rel="stylesheet" href="/static/styles.css">
</head>
<body>
	<main class="container">
		<nav class="topbar">
			<a href="/">Home</a> Â· <a href="/history/">History</a>
			<span style="float:right">
			{% if user %}
				<span class="meta">Signed in as {{ user.email }}</span>
				<form action="/auth/logout" method="post" style="display:inline">
					<button type="submit" class="tag" style="margin-left:8px">Sign out</button>
				</form>
			{% else %}
				<a href="/auth/login">Login</a> Â· <a href="/auth/register">Register</a>
			{% endif %}
			</span>
		</nav>
		{% if flash %}
		<div class="flash">{{ flash }}</div>
		{% endif %}
		<h1>Find a horror movie by your mood ðŸ‘»ðŸŽ¬</h1>
		<p class="tagline">Type a vibe and get terrifying picks.</p>

		<ul class="examples">
			<li><button class="example" onclick="pickMood('A fun movie with a lot of blood')"><span class="icon">ðŸ©¸</span><span class="label">A fun movie with a lot of blood</span></button></li>
			<li><button class="example" onclick="pickMood('Supernatural hauntings with ghosts')"><span class="icon">ðŸ‘»</span><span class="label">Supernatural hauntings with ghosts</span></button></li>
			<li><button class="example" onclick="pickMood('Mind-bending psychological horror')"><span class="icon">ðŸ§ </span><span class="label">Mind-bending psychological horror</span></button></li>
			<li><button class="example" onclick="pickMood('Zombie apocalypse survival')"><span class="icon">ðŸ§Ÿ</span><span class="label">Zombie apocalypse survival</span></button></li>
			<li><button class="example" onclick="pickMood('Classic slasher with suspense')"><span class="icon">ðŸ”ª</span><span class="label">Classic slasher with suspense</span></button></li>
		</ul>

		<form action="/loading" method="get" class="search-form">
			<label for="mood">Mood</label>
			<input id="mood" name="mood" type="text" placeholder="Describe the vibeâ€¦ e.g., haunted house with ghosts" required>

			<div class="controls" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin-top:12px">
				<div>
					<label for="min_year">Min year</label>
					<input id="min_year" name="min_year" type="number" min="1900" max="2100" placeholder="e.g., 2005">
				</div>
				<div>
					<label for="max_year">Max year</label>
					<input id="max_year" name="max_year" type="number" min="1900" max="2100" placeholder="e.g., 2024">
				</div>
				<div>
					<label for="limit">How many</label>
					<input id="limit" name="limit" type="number" min="1" max="20" value="6">
				</div>
				<div>
					<label for="kind">Type</label>
					<select id="kind" name="kind">
						<option value="movie" selected>Movies</option>
						<option value="series">Series</option>
						<option value="both">Both</option>
					</select>
				</div>
				<div style="display:flex;align-items:end;gap:6px">
					<label for="english" style="margin:0">English only</label>
					<input id="english" name="english" type="checkbox" value="1">
				</div>
			</div>

			<button type="submit" style="margin-top:12px">Recommend</button>
		</form>

		<p class="footer">Have fun and stay spooky ðŸŽƒ</p>
		
		<!-- Buy me a coffee button -->
		<div style="text-align: center; margin-top: 2rem;">
			<a href="/stripe/coffee" style="
				background: linear-gradient(45deg, #ff6b35, #f7931e);
				color: white;
				text-decoration: none;
				padding: 0.8rem 1.5rem;
				border-radius: 8px;
				display: inline-flex;
				align-items: center;
				gap: 0.5rem;
				font-size: 1rem;
				transition: transform 0.2s;
			" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
				â˜• Buy me a coffee
			</a>
		</div>
	</main>
	<script>
		function pickMood(v){
			var i = document.getElementById('mood');
			i.value = v;
			document.querySelector('.search-form').submit();
		}
		// auto-hide flash messages
		setTimeout(function(){
			var f = document.querySelector('.flash');
			if(f){ f.style.display = 'none'; }
		}, 3000);
	</script>
</body>
</html>
